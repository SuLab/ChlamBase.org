angular.module("orthologView").component("orthologView",{bindings:{locusTag:"<"},controller:"orthologCtrl",templateUrl:"/static/wiki/js/angular_templates/ortholog-view.html"}).controller("orthologCtrl",["orthoData","InterPro","hostPathogen","GOTerms","OperonData","expressionTimingData","$filter","sendToView","$location",function(t,a,e,o,n,i,u,l,h){"use strict";var s=this;s.data={},s.reference="",t.getOrthologs(s.locusTag).then(function(t){angular.forEach(t.results.bindings,function(r){s.hasOrthologs=!0,s.data[r.orthoTaxid.value]={locusTag:r.orthoLocusTag.value,taxid:r.orthoTaxid.value},r.reference&&(s.reference=r.reference.value),r.uniprot?(a.getInterPro(r.uniprot.value).then(function(t){s.data[r.orthoTaxid.value].ip=0<t.length}),e.getHostPathogen(r.uniprot.value).then(function(t){s.data[r.orthoTaxid.value].hp=0<t.length}),o.getGoTerms(r.uniprot.value).then(function(t){var a=t.data.results.bindings;s.data[r.orthoTaxid.value].go=0<a.length;var e=[];angular.forEach(a,function(t,a){t.hasOwnProperty("ecnumber")&&-1==e.indexOf(t.ecnumber.value)&&e.push(t.ecnumber.value)});var o={locusTag:r.orthoLocusTag.value,taxid:r.orthoTaxid.value,ec_number:e},n=h.path()+"/mg_mutant_view";l.sendToView(n,o).then(function(t){s.data[r.orthoTaxid.value].mutant=0<t.data.mutants.length})})):(s.data[r.orthoTaxid.value].ip=!1,s.data[r.orthoTaxid.value].hp=!1,s.data[r.orthoTaxid.value].go=!1),n.getOperonData(r.entrez.value).then(function(t){s.data[r.orthoTaxid.value].operon=0<t.data.results.bindings.length}),i.getExpression(function(t){var a=u("keywordFilter")(t,r.orthoLocusTag.value),e={};angular.forEach(a[0],function(t,a){"_id"!=a&&"$oid"!=a&&"timestamp"!=a&&(e[a]=t)}),s.data[r.orthoTaxid.value].expression=null!=e.RB_EXPRESSION_TIMING})})}),s.tSettings={strain:!0,tax:!0,cLocus:!0,dLocus:!1,identity:!1,length:!1,eval:!1,ref:!0,expression:!0,go:!0,operons:!0,mutants:!0,interpro:!0,hostPathogen:!0}}]);