angular.module('browserPage').component('browserPage',{controller:function($filter,$location,$routeParams,allChlamOrgs,allOrgGenes){var ctrl=this;ctrl.$onInit=function(){ctrl.loading=true;ctrl.currentTaxid=$routeParams.taxid;console.log(ctrl.currentTaxid);allChlamOrgs.getAllOrgs(function(data){ctrl.orgList=data;ctrl.currentOrg=$filter('getJsonItemOrg')('taxid',ctrl.currentTaxid,ctrl.orgList);if(ctrl.currentOrg==undefined){alert("not a valid taxonomy id");$location.path('/');}});allOrgGenes.getAllOrgGenes(ctrl.currentTaxid).then(function(data){var dataResults=data.data.results.bindings;ctrl.currentAllGenes=$filter('orderObjectBy')(dataResults,'genStart');ctrl.initialGene=ctrl.currentAllGenes[0];console.log('hello all org genes');console.log(ctrl.currentAllGenes);}).finally(function(){ctrl.loading=false;});ctrl.onSelect=function($item){$location.path('/organism/'+ctrl.currentTaxid+"/gene/"+$item.locusTag.value);};};},templateUrl:'/static/wiki/js/angular_templates/browser-page.html'});