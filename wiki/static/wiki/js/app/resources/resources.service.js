angular.module("resources").factory("allOrgs",function(e){return e("/static/wiki/json/orgsList.json",{},{getAllOrgs:{method:"GET",params:{},isArray:!0,cache:!0}})}),angular.module("resources").factory("allChlamOrgs",function(e){return e("/static/wiki/json/chlamsOrgList.json",{},{getAllOrgs:{method:"GET",params:{},isArray:!0,cache:!0}})}),angular.module("resources").factory("evidenceCodes",function(e){return e("/static/wiki/json/evidence_codes.json",{},{getevidenceCodes:{method:"GET",params:{},isArray:!0,cache:!0}})}),angular.module("resources").factory("mutantData",function(e){return e("/static/wiki/json/kokes.json",{},{getKokesMutants:{method:"GET",params:{},isArray:!0,cache:!0}})}),angular.module("resources").factory("expressionTimingData",function(e){return e("/static/wiki/json/expression_timing.json",{},{getExpression:{method:"GET",params:{},isArray:!0,cache:!0}})}),angular.module("resources").factory("orthoData",function(e,r){return{getOrthologs:function(t){var n=r.defer(),o="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?orthoLocusTag ?orthoTaxid WHERE{ ?gene wdt:P2393 '"+t+"';wdt:P684 ?ortholog.?ortholog wdt:P2393 ?orthoLocusTag;wdt:P703 ?orthoTaxon.?orthoTaxon wdt:P685 ?orthoTaxid.}");return e.get(o).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}}),angular.module("resources").factory("appData",function(e){console.log("resources appData");return e("/static/wiki/json/appData.json",{},{getAppData:{method:"GET",params:{},isArray:!0,cache:!0}})}),angular.module("resources").factory("sendToView",function(e){return{sendToView:function(r,t){console.log(t);var n=r;return e.post(n,t).success(function(e){return e}).error(function(e,r){return r})}}}),angular.module("resources").factory("uploadFile",function(e){return{uploadFile:function(r,t){var n=r;return e.post(n,t).success(function(e){return e}).error(function(e,r){return r})}}}),angular.module("resources").factory("currentOrgFetch",function(e){return{getCurrentOrg:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?taxid ?taxon ?taxonLabel WHERE{ ?taxon wdt:P685 '"+r+"'. SERVICE wikibase:label { bd:serviceParam wikibase:language 'en' . } }");return e.get(t).then(function(e){var t=e.data.results.bindings;return{taxid:r,taxon:t[0].taxon.value,taxonLabel:t[0].taxonLabel.value}})}}}),angular.module("resources").factory("speciesGenes",function(e){console.log("speciesGenes");return{getSpeciesGenes:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?protein ?proteinLabel ?uniprot WHERE{ ?taxon wdt:P685 '"+r+'\'. ?protein wdt:P352 ?uniprot;wdt:P703 ?taxon;rdfs:label ?proteinLabel.FILTER (lang(?proteinLabel) = "en") }');return console.log(t),e.get(t).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("allOrgGenes",function(e){return{getAllOrgGenes:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?gene ?geneLabel ?proteinLabel ?protein ?entrez ?refseqProt ?locusTag ?uniprot ?chromosome ?chromosomeLabel ?refSeqChromosome ?refSeqChromosomeLabel ?genStart ?genEnd ?strand (group_concat(?aliases;separator=', ') as ?alias) WHERE{ ?taxon wdt:P685 '"+r+"'. ?gene wdt:P703 ?taxon; wdt:P279 wd:Q7187; wdt:P2393 ?locusTag; wdt:P351 ?entrez; wdt:P644 ?genStart; wdt:P645 ?genEnd; wdt:P2548 ?strand; skos:altLabel ?aliases. OPTIONAL {?gene wdt:P688 ?protein; wdt:P352 ?uniprot; wdt:P637 ?refseqProt. }?gene p:P644 ?chr. ?chr pq:P1057 ?chromosome. ?chromosome wdt:P2249 ?refSeqChromosome.SERVICE wikibase:label { bd:serviceParam wikibase:language 'en' .}} GROUP BY ?gene ?geneLabel ?protein ?proteinLabel ?entrez ?refseqProt ?locusTag ?uniprot ?chromosome ?chromosomeLabel ?genStart ?genEnd ?strand ?refSeqChromosome ?refSeqChromosomeLabel ");return console.log(t),e.get(t).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("allOrgOperons",function(e){return{getAllOrgOperons:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?operon ?operonLabel WHERE{ ?taxon wdt:P685 '"+r+"'. ?operon wdt:P703 ?taxon; wdt:P279 wd:Q139677. SERVICE wikibase:label { bd:serviceParam wikibase:language 'en' .}} ");return e.get(t).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("GOTerms",function(e){return{getGoTerms:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT  distinct ?gotermValueLabel ?goID ?gotermValue ?goclass ?determinationLabel ?reference_stated_inLabel ?reference_retrievedLabel ?ecnumber WHERE { ?protein wdt:P352 '"+r+'\'. {?protein p:P680 ?goterm} UNION {?protein p:P681 ?goterm} UNION {?protein p:P682 ?goterm}.  ?goterm pq:P459 ?determination .OPTIONAL {?goterm prov:wasDerivedFrom/pr:P248 ?reference_stated_in .}OPTIONAL {?goterm prov:wasDerivedFrom/pr:P813 ?reference_retrieved .}OPTIONAL {?goterm prov:wasDerivedFrom/pr:P698 ?pmid .}{?goterm ps:P680 ?gotermValue} UNION {?goterm ps:P681 ?gotermValue} UNION {?goterm ps:P682 ?gotermValue}.  ?gotermValue wdt:P279* ?goclass; wdt:P686 ?goID. FILTER ( ?goclass = wd:Q2996394 || ?goclass = wd:Q5058355 || ?goclass = wd:Q14860489) OPTIONAL {?gotermValue wdt:P591 ?ecnumber.}SERVICE wikibase:label { bd:serviceParam wikibase:language "en" .}}');return e.get(t).success(function(e){return e.data}).error(function(e){return e})}}}),angular.module("resources").factory("InterPro",function(e){return{getInterPro:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT distinct ?protein ?interPro_item ?interPro_label ?ipID ?reference_stated_inLabel ?refURL WHERE {?proteinLabel wdt:P352'"+r+'\';p:P527 ?interPro.?interPro ps:P527 ?interPro_item.?interPro prov:wasDerivedFrom/pr:P248 ?reference_stated_in ;prov:wasDerivedFrom/pr:P854 ?refURL .?interPro_item wdt:P2926 ?ipID;rdfs:label ?interPro_label. SERVICE wikibase:label { bd:serviceParam wikibase:language "en" .}filter (lang(?interPro_label) = "en") .}');return e.get(t).then(function(e){return e.data.results.bindings})}}}),angular.module("resources").factory("RefSeqChrom",function(e){return{getRefSeqChrom:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?refSeqChromosome WHERE{ \n  ?gene wdt:P2393 '"+r+"';        p:P644 ?chr.\n  ?chr pq:P1057 ?chromosome. \n  ?chromosome wdt:P2249 ?refSeqChromosome.\n  SERVICE wikibase:label { bd:serviceParam wikibase:language 'en' .}\n} \n");return e.get(t).then(function(e){return e.data.results.bindings})}}}),angular.module("resources").factory("hostPathogen",function(e){return{getHostPathogen:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent('SELECT ?host ?hostLabel ?protein ?proteinLabel ?hostProtein ?hostGeneLabel ?hostProteinLabel ?reference_stated_in ?reference_stated_inLabel ?pmid (group_concat(distinct ?determination ;separator=", ") as ?dmethod) (group_concat(distinct ?det_label ;separator=", ") as ?dmethodLabel) WHERE{ ?protein wdt:P352 \''+r+'\'; wdt:P129 ?hostProtein; p:P129 ?hpClaim. ?hpClaim prov:wasDerivedFrom/pr:P248 ?reference_stated_in; pq:P459 ?determination. ?determination rdfs:label ?det_label. ?reference_stated_in wdt:P698 ?pmid. ?hostProtein wdt:P703 ?host; wdt:P702 ?hostGene. FILTER (lang(?det_label) = "en") SERVICE wikibase:label { bd:serviceParam wikibase:language "en" .}} GROUP BY ?protein ?hostGeneLabel ?proteinLabel ?reference_stated_in ?reference_stated_inLabel ?pmid ?hostProtein ?hostProteinLabel ?host ?hostLabel');return console.log(t),e.get(t).then(function(e){return e.data.results.bindings})}}}),angular.module("resources").factory("OperonData",function(e){return{getOperonData:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?gene ?locusTag ?entrez ?operon ?operonLabel ?operonItem  ?operonItemLabel ?genStart ?genEnd ?strand ?strandLabel ?op_genes ?reference_stated_in ?reference_stated_inLabel ?op_genesLabel ?reference_pmid WHERE { ?gene wdt:P351 '"+r+"'; p:P361 ?operon. ?operon ps:P361 ?operonItem. ?operonItem wdt:P279 wd:Q139677; wdt:P527 ?op_genes. ?op_genes wdt:P2393 ?locusTag; wdt:P351 ?entrez; wdt:P644 ?genStart; wdt:P645 ?genEnd; wdt:P2548 ?strand.OPTIONAL { ?operon prov:wasDerivedFrom/pr:P248 ?reference_stated_in. ?reference_stated_in wdt:P698 ?reference_pmid. } SERVICE wikibase:label { bd:serviceParam wikibase:language 'en' . }}");return e.get(t).success(function(e){return e.data}).error(function(e){return e})}}}),angular.module("resources").factory("expasyData",function(e){return{getReactionData:function(r){var t="https://chlambase.org/expasy/EC/{ecnumber}.txt".replace("{ecnumber}",r);return e.get(t).then(function(e){var r={reaction:[]},t=e.data.split("\n");return angular.forEach(t,function(e,t){if(e.match("^ID")&&(r.ecnumber=e.slice(5)),e.match("^CA ")){var n=e.replace(/^(CA)/,"");r.reaction.push(n)}}),r},function(e){return e})}}}),angular.module("resources").factory("pubMedData",function(e){return{getPMID:function(r){var t="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&retmode=json&id="+r;return e.get(t).success(function(e){return e.result[r]}).error(function(e){return e})}}}),angular.module("resources").factory("locusTag2Pub",function(e){return{getlocusTag2Pub:function(r){var t="https://www.ebi.ac.uk/europepmc/webservices/rest/search?query=chlamydia%20{locusTag}&format=json".replace("{locusTag}",r);return e.get(t).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("euroPubData",function(e){return{getEuroPubData:function(r){var t="https://www.ebi.ac.uk/europepmc/webservices/rest/search?query={pubmedID}&resulttype=core&format=json".replace("{pubmedID}",r);return e.get(t).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("pubLinks",function(e,r){return{getPubLinks:function(r){var t="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/elink.fcgi?dbfrom=gene&db=pubmed&id={entrez}&retmode=json&linkname=gene_pubmed_pmc_nucleotide".replace("{entrez}",r);return e.get(t).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("recentChlamPubLinks",function(e){return{getRecentChlamPubLinks:function(r){return e.get("https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=chlamydia trachomatis&reldate=10&datetype=edat&retmax=100&usehistory=y&retmode=json").success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("allGoTerms",function(e){return{getGoTermsAll:function(r,t){var n="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT DISTINCT ?goterm ?goID ?goterm_label WHERE { ?goterm wdt:P279* wd:"+t+"; rdfs:label ?goterm_label; wdt:P686 ?goID. FILTER(lang(?goterm_label) = 'en') FILTER(CONTAINS(LCASE(?goterm_label), '"+r.toLowerCase()+"' ))}");return e.get(n).success(function(e){return e.data}).error(function(e){return e})}}}),angular.module("resources").factory("allChlamydiaGenes",function(e){return{getAllChlamGenes:function(){var r="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT ?taxon ?taxid ?taxonLabel ?gene ?geneLabel ?entrez  ?uniprot ?protein ?proteinLabel ?locusTag ?geneDescription ?refseq_prot ?aliases WHERE {  ?taxon wdt:P171* wd:Q846309.  ?gene wdt:P279 wd:Q7187;  wdt:P703 ?taxon;  wdt:P351 ?entrez;  wdt:P2393 ?locusTag;  wdt:P688 ?protein;  skos:altLabel ?aliases.?protein wdt:P352 ?uniprot;  wdt:P637 ?refseq_prot. ?taxon wdt:P685 ?taxid.SERVICE wikibase:label {bd:serviceParam wikibase:language 'en'.}}");return e.get(r).success(function(e){return e.data}).error(function(e){return e})}}}),angular.module("resources").factory("wdGetEntities",function(){return{wdGetEntities:function(e){return $.ajax({url:"https://www.wikidata.org/w/api.php",jsonp:"callback",dataType:"jsonp",data:{action:"wbgetentities",ids:e,format:"json"},xhrFields:{withCredentials:!0},success:function(e){return e},error:function(e){return e}})}}}),angular.module("resources").factory("entrez2QID",function(e,r){return{getEntrez2QID:function(r){var t="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent("SELECT distinct ?gene ?protein WHERE{?gene wdt:P351 '{entrez}'; wdt:P688 ?protein.}".replace("{entrez}",r));return e.get(t).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("locusTag2QID",function(e,r){return{getLocusTag2QID:function(r,t){var n="SELECT distinct ?gene ?protein WHERE{?strain wdt:P685 '{taxid}'. ?gene wdt:P2393 '{locusTag}'; wdt:P703 ?strain; wdt:P688 ?protein.}".replace("{taxid}",t),o="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent(n.replace("{locusTag}",r));return e.get(o).success(function(e){return e}).error(function(e){return e})}}}),angular.module("resources").factory("abstractSPARQL",function(e){return{getAbstractSPARQL:function(r,t,n){var o="PREFIX wd: <https://www.wikidata.org/entity/> PREFIX prov: <https://www.w3.org/ns/prov#> PREFIX pr: <https://www.wikidata.org/prop/reference/> PREFIX p: <https://www.wikidata.org/prop/> PREFIX ps: <https://www.wikidata.org/prop/statement/> SELECT (wd:prot_qid as ?sub) ?obj ?objLabel ?objDescription ?obj_id ?stated_in ?stated_inLabel ?retrieved ?reference_url ?language ?languageLabel ?curator ?curatorLabel ?determination ?determinationLabel WHERE {  wd:prot_qid p:an_prop ?claim .  ?claim ps:an_prop ?obj.  ?obj wdt:id_prop ?obj_id.   optional {?claim prov:wasDerivedFrom/pr:P248 ?stated_in. }   optional {?claim prov:wasDerivedFrom/pr:P813 ?retrieved. }   optional {?claim prov:wasDerivedFrom/pr:P854 ?reference_url. }   optional {?claim prov:wasDerivedFrom/pr:P407 ?language. }   optional {?claim prov:wasDerivedFrom/pr:P1640 ?curator. }   optional {?claim pq:P459 ?determination. }   SERVICE wikibase:label {         bd:serviceParam wikibase:language 'en' .  } }".replace(/prot_qid/g,r).replace(/an_prop/g,t).replace(/id_prop/g,n),a="https://query.wikidata.org/sparql?format=json&query="+encodeURIComponent(o);return console.log(o),e.get(a).success(function(e){return e}).error(function(e){return e})}}});