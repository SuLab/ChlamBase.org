<landing-header page="'main'"></landing-header>
<div class="container-fluid" style="padding-top: 15vh; padding-bottom: 40px; background: #414449;">
    <div class="container">
        <div class="panel" style="border: 3px grey solid;">
            <div class="padding20 text-center" ng-class="{'bg-434': $ctrl.currentOrg.taxonLabel === 'Chlamydia trachomatis 434/BU','bg-DUX': $ctrl.currentOrg.taxonLabel === 'Chlamydia trachomatis D/UW-3/CX','bg-NIGG': $ctrl.currentOrg.taxonLabel === 'Chlamydia muridarum Nigg','bg-CW': $ctrl.currentOrg.taxonLabel === 'Chlamydia pneumoniae CWL029'}">
              <div class="row">
                <div class="col-sm-2">
                  <a  tooltip-placement="bottom" uib-tooltip="Genome Level" class="btn themeButton-black" href="/organism/{{ $ctrl.currentTaxid }}">
                  <i class="fas fa-chevron-left fa-2x"></i>
                  </a>
                </div>
                  <table>
                      <tr>
                          <td style="padding:10px;">
                              <img class="dropShadow" style="display:inline;" width="40px" src="static/wiki/img/{{$ctrl.icon}}" />
                          </td>
                          <td style="padding:10px;">
                              <h2 style="display:inline;" class="noMargin text-light textShadow">{{ $ctrl.orgName}}</h2>
                          </td>
                          <td style="padding:10px;">
                              <div class="taxIDBadge">
                                  <i class="fas fa-passport"></i> NCBI TaxID: {{ $ctrl.currentTaxid }}
                              </div>
                          </td>
                      </tr>
                  </table>
              </div>
            </div>
            <uib-tabset active="active" class="bg-purple noBorder">
              <uib-tab index="'overview'">
                <uib-tab-heading >
                  Gene Overview
                </uib-tab-heading>
                <gene-overview data="$ctrl.currentGene" annotations="$ctrl.annotations"></gene-overview>
              </uib-tab>
              <uib-tab index="'jbrowse'" select="$ctrl.jLoad()">
                <uib-tab-heading >
                  Genome Browser
                </uib-tab-heading>
                <div id="jbrowse-div">
                  <jbrowse-view start="$ctrl.currentGene.genStart" end="$ctrl.currentGene.genEnd" delay="true"
                                refseq="$ctrl.currentGene.refseqGenome" highlight="true" load="$ctrl.jLoad"></jbrowse-view>
                </div>
              </uib-tab>
              <uib-tab index="'alignment'" ng-show="$ctrl.settings['alignment']">
                <uib-tab-heading >
                  Ortholog Alignment(s)
                </uib-tab-heading>
                <alignment-view locus-tag="$ctrl.currentGene.locusTag" tax-id="$ctrl.currentGene.taxid"></alignment-view>
              </uib-tab>
              <uib-tab index="'movie'" ng-show="$ctrl.settings['alignment']">
                  <uib-tab-heading >
                      Movie Data
                  </uib-tab-heading>
                  <movie-view data="$ctrl.currentGene.movie" gene="$ctrl.currentGene"></movie-view>
              </uib-tab>
            </uib-tabset>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="authorization_button" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="padding:10px">
        	<div class="modal-header bg-dark">
        		<h4 class="modal-title text-pink-light">{{$ctrl.appData.title}} Authorization</h4>
        	</div>
        	<div class="modal-body">
        		<oauth-form ng-hide="showHelp"></oauth-form>
            	<help-form ng-show="showHelp"></help-form>
        	</div>
            <div class="modal-footer bg-dark">
            	<button type="button" class="btn themeButton-small" style="float:left" ng-click="showHelp = !showHelp">
            		<span ng-hide="showHelp">Need Help?</span>
            		<span ng-show="showHelp">Back</span>
            	</button>
                <button type="button" class="btn themeButton-small" data-dismiss="modal" ng-click="showHelp = false">Close</button>
            </div>
        </div>
    </div>
</div>
